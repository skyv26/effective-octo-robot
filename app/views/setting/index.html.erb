<div data-controller="tabs" class="p-6">
  <!-- Tabs -->
  <div class="flex space-x-4 mb-6 border-b">
    <button data-action="tabs#switch" data-tabs-target="tab" data-tabs-name="profile" class="py-2 px-4 border-b-2 font-semibold border-blue-500 text-blue-500">Profile Settings</button>
   <% if current_user.superadmin? || current_user.admin? %>
    <button data-action="tabs#switch" data-tabs-target="tab" data-tabs-name="manage_users" class="py-2 px-4 border-b-2 font-semibold text-gray-600 hover:text-blue-500 hover:border-blue-500">Manage Users</button>
  <% end %>
   </div>

  <!-- Tab Content -->
  <div class="space-y-6">
    <!-- Profile Settings -->
    <div data-tabs-target="content" data-tabs-name="profile">
      <h2 class="text-xl font-semibold mb-4">Edit Profile</h2>

      <form>
        <div class="mb-4">
          <label class="block font-medium">Name</label>
          <input type="text" value="John Admin" class="border p-2 w-full" />
        </div>

        <div class="mb-4">
          <label class="block font-medium">Profile Photo</label>
          <input type="file" class="border p-2 w-full" />
        </div>

        <div>
          <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded">Save Changes</button>
        </div>
      </form>
    </div>

    <!-- Manage Users -->
    
    <% if current_user.superadmin? || current_user.admin? %>
  <div data-tabs-target="content" data-tabs-name="manage_users" class="hidden">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-semibold">Manage Users</h2>
      <% if current_user.superadmin? %>
        <%= link_to "New User", new_user_path, class: "bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600" %>
      <% end %>
    </div>

    <table class="min-w-full table-auto border-collapse border border-gray-300">
      <thead>
        <tr class="bg-gray-100">
          <th class="text-left px-4 py-2 border">ID</th>
          <th class="text-left px-4 py-2 border">Name</th>
          <th class="text-left px-4 py-2 border">Email</th>
          <th class="text-left px-4 py-2 border">Role</th>
          <th class="text-left px-4 py-2 border">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @users.each do |user| %>
          <% next if current_user.admin? && user.superadmin? %>
          <tr>
            <td class="px-4 py-2 border"><%= user.id %></td>
            <td class="px-4 py-2 border"><%= user.name %></td>
            <td class="px-4 py-2 border"><%= user.email %></td>
            <td class="px-4 py-2 border"><%= user.role.titleize %></td>
            <td class="px-4 py-2 border">
              <%= link_to 'Edit', edit_user_path(user), class: "text-blue-500 hover:underline" if current_user.superadmin? %>
              <% if current_user.superadmin? %> | <%= link_to 'Delete', user_path(user), method: :delete, data: { confirm: "Are you sure?" }, class: "text-red-500 hover:underline" %> <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
<% end %>

  </div>
</div>
